<mvc:View
    xmlns:uxap="sap.uxap"
    xmlns:cards="sap.f.cards"
    controllerName="fi.zfrfi0050.fs.controller.CreateTemplate"
    xmlns:core="sap.ui.core"
    xmlns:richtexteditor="sap.ui.richtexteditor"
    xmlns:layout="sap.ui.layout"
    xmlns:smartfilterbar="sap.ui.comp.smartfilterbar"
    xmlns:smarttable="sap.ui.comp.smarttable"
    xmlns:f="sap.f"
    xmlns:form="sap.ui.layout.form"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:h="http://www.w3.org/1999/xhtml"
>
    <Page
        id="P_Create"
        title="{i18n>CreatePageTitle}"
        titleAlignment="Center"
        showNavButton="false"
        navButtonPress="onPageNavBack"
        showHeader="false"
    >
        <uxap:ObjectPageLayout id="OPL_CreateObjectPage" showFooter="{BaseData>/Visible/Footer}" showAnchorBar="true">
            <uxap:headerTitle>
                <uxap:ObjectPageDynamicHeaderTitle>
                    <uxap:expandedHeading>
                        <!-- <Title text="생성" /> -->
                    </uxap:expandedHeading>
                    <uxap:snappedHeading>
                        <FlexBox
                            fitContainer="true"
                            alignItems="Center"
                        >
                            <!-- <Title text="생성" /> -->
                        </FlexBox>
                    </uxap:snappedHeading>
                    <uxap:expandedContent >
                    </uxap:expandedContent>
                    <uxap:actions>
                        <Button
                            text="{i18n>Btn0010}"
                            type="Emphasized"
                            press=".onBtnPress"
                        />
                        
                        <h:form name="workflowForm">
                            <h:input type="hidden" name="SystemID" />
                            <h:input type="hidden" name="WorkKind" />
                            <h:input type="hidden" name="TblKey" />
                            <h:input type="hidden" name="ReqID" />
                            <h:input type="hidden" name="Title" />
                            <h:input type="hidden" name="Content" />
                        </h:form>
                    </uxap:actions>
                </uxap:ObjectPageDynamicHeaderTitle>
            </uxap:headerTitle>

            <uxap:headerContent>
            </uxap:headerContent>

            <!-- // Section 시작부분 -->
            <uxap:sections>
                <uxap:ObjectPageSection
                    titleUppercase="true"
                    id="OPS_Header1"
                    title="Content"
                    showTitle="true"
                >
                    <uxap:subSections>
                        <uxap:ObjectPageSubSection title="기본정보">
                            <VBox>
                                <form:SimpleForm
                                    editable="true"
                                    layout="ResponsiveGridLayout"
                                >
                                    <form:content>
                                        <HBox>
                                            <VBox>
                                                <HBox
                                                    width="100%"
                                                    alignItems="Center"
                                                    class="">
                                                    <Label
                                                        text="전표번호 : "
                                                        width="8rem"
                                                    />
                                                    <Label
                                                        text="{BaseData>/Parameters/AccountingDocument}"
                                                        width="15rem"
                                                    />
                                                </HBox>
                                            </VBox>
                                            <HBox>
                                                <HBox
                                                    width="100%"
                                                    alignItems="Center"
                                                    class="">
                                                    <Label
                                                        width="8rem"
                                                        text="차변합계:"
                                                    />
                                                    <FlexBox width="15rem">
                                                        <ObjectStatus
                                                            text="{ 
                                                            parts: ['BaseData>/Parameters/DebitTotal', 'BaseData>/Parameters/Currency'],
                                                            type: 'sap.ui.model.type.Currency'
                                                        }"
                                                        />
                                                    </FlexBox>
                                                </HBox>
                                                <HBox
                                                    width="100%"
                                                    alignItems="Center"
                                                    class="">
                                                    <Label
                                                        width="8rem"
                                                        text="대변합계:"
                                                    />
                                                    <FlexBox width="15rem">
                                                        <ObjectStatus
                                                            text="{ 
                                                            parts: ['BaseData>/Parameters/CreditTotal', 'BaseData>/Parameters/Currency'],
                                                            type: 'sap.ui.model.type.Currency'
                                                        }"
                                                        />
                                                    </FlexBox>
                                                </HBox>
                                                <HBox
                                                    width="100%"
                                                    alignItems="Center"
                                                    class="">
                                                    <Label
                                                        width="8rem"
                                                        text="잔액:"
                                                    />
                                                    <FlexBox width="15rem">
                                                        <ObjectStatus
                                                            text="{ 
                                                                parts: ['BaseData>/Parameters/AmountTotal', 'BaseData>/Parameters/Currency'],
                                                                type: 'sap.ui.model.type.Currency'
                                                            }"
                                                            state="Error"   
                                                        />
                                                    </FlexBox>
                                                </HBox>
                                            </HBox>
                                        </HBox>
                                    </form:content>
                                </form:SimpleForm>
                            </VBox>
                        </uxap:ObjectPageSubSection>
                    </uxap:subSections>
                </uxap:ObjectPageSection>   
                <uxap:ObjectPageSection
                    titleUppercase="true"
                    id="OPS_Header2"
                    title="Content"
                    showTitle="true"
                >
                    <uxap:subSections>
                        <uxap:ObjectPageSubSection title="입력정보">
                            <VBox>
                                <form:SimpleForm
                                    editable="true"
                                    layout="ResponsiveGridLayout"
                                >
                                    <form:content>
                                        <HBox width="100%">
                                            <items>
                                                <VBox
                                                    width="100%"
                                                    direction="Column"
                                                >
                                                    <items>
                                                    <HBox
                                                            width="100%"
                                                            alignItems="Center"
                                                            class=""
                                                        >
                                                            <items>
                                                                <!-- <Label
                                                                    text="회사코드 : "
                                                                    width="8rem"
                                                                />
                                                                <Text
                                                                    width="15rem"
                                                                    text="{BaseData>/Parameters/CompanyCode}"
                                                                /> -->
                                                                <Label
                                                                    text="사업장코드 : "
                                                                    width="8rem"
                                                                />
                                                                <Input
                                                                    value="{BaseData>/Parameters/BusinessPlace}"
                                                                    showValueHelp="true"
                                                                    width="15rem"
                                                                    valueState="{BaseData>/Parameters/BusinessPlaceState}"
                                                                    valueHelpRequest=".onOpenBusinessPlace"
                                                                />
                                                            </items>
                                                        </HBox>
                                                        <HBox
                                                            width="100%"
                                                            alignItems="Center"
                                                            class=""
                                                        >
                                                            <items>
                                                                <Label
                                                                    text="입력일 : "
                                                                    width="8rem"
                                                                />
                                                                <Text
                                                                    width="15rem"
                                                                    text="{BaseData>/Parameters/InputData}"
                                                                />
                                                            </items>
                                                        </HBox>

                                                        <HBox
                                                            width="100%"
                                                            alignItems="Center"
                                                            class=""
                                                        >
                                                            <items>
                                                                <Label
                                                                    text="증빙일자 : "
                                                                    width="8rem"
                                                                />
                                                                <DatePicker
                                                                    width="15rem"
                                                                    displayFormat="yyyy-MM-dd"
                                                                    valueFormat="yyyy-MM-dd"
                                                                    value="{
                                                                        path: 'BaseData>/Parameters/DocumentDate',
                                                                        type: 'sap.ui.model.type.String',
                                                                         formatOptions: {
                                                                        'pattern': 'yyyy-MM-dd'
                                                                        }
                                                                    }"
                                                                    valueState="{BaseData>/Parameters/DocumentDateState}"
                                                                />
                                                            </items>
                                                        </HBox>
                                                        <HBox
                                                            width="100%"
                                                            alignItems="Center"
                                                            class=""
                                                        >
                                                            <items>
                                                                <Label
                                                                    text="전기일자 : "
                                                                    width="8rem"
                                                                />
                                                                <DatePicker
                                                                    width="15rem"
                                                                    change=".onChangePostingDate"
                                                                    displayFormat="yyyy-MM-dd"
                                                                    valueFormat="yyyy-MM-dd"
                                                                    valueState="{BaseData>/Parameters/PostingDateState}"
                                                                    value="{
                                                                    path: 'BaseData>/Parameters/PostingDate',
                                                                    type: 'sap.ui.model.type.String',
                                                                    formatOptions: {
                                                                        'pattern': 'yyyy-MM-dd'
                                                                    }
                                                                    
                                                                }"
                                                                />
                                                            </items>
                                                        </HBox>

                                                        <HBox
                                                            width="100%"
                                                            alignItems="Center"
                                                            class=""
                                                        >
                                                            <items>
                                                                <Label
                                                                    text="거래통화 : "
                                                                    width="8rem"
                                                                />                                                                
                                                                <FlexBox width="15rem">
                                                                    <ObjectStatus
                                                                        text="{ 
                                                                            parts: ['BaseData>/Parameters/Currency'],
                                                                            type: 'sap.ui.model.type.Currency',
                                                                            formatOptions: {showNumber: false}
                                                                        }"
                                                                    />
                                                                </FlexBox>
                                                                <!-- <Input
                                                                    value="{BaseData>/Parameters/Currency}"
                                                                    showValueHelp="true"
                                                                    width="15rem"
                                                                    valueState="{BaseData>/Parameters/CurrencyState}"
                                                                    valueHelpRequest=".onOpenCurrency"
                                                                /> -->
                                                            </items>
                                                        </HBox>
                                                        
                                                    </items>
                                                </VBox>
                                                <VBox
                                                    width="100%"
                                                    direction="Column"
                                                >
                                                    <items>
                                                        
                                                        <HBox
                                                            width="100%"
                                                            alignItems="Center"
                                                            class=""
                                                        >
                                                            <items>
                                                                <Label
                                                                    text="공급업체 : "
                                                                    width="8rem"
                                                                />
                                                                <Input
                                                                    xmlns:core="sap.ui.core"
                                                                    showValueHelp="true"
                                                                    value="{BaseData>/Parameters/Supplier}"
                                                                    valueState="{BaseData>/Parameters/SupplierState}"
                                                                    width="15rem"
                                                                    valueHelpRequest=".onOpenSupplier"
                                                                />
                                                            </items>
                                                        </HBox>
                                                        <HBox
                                                            width="100%"
                                                            alignItems="Center"
                                                            class=""
                                                        >
                                                            <items>
                                                                <Label
                                                                    text="계좌 : "
                                                                    width="8rem"
                                                                />
                                                                <Input
                                                                    value="{BaseData>/Parameters/Bankaccount}"
                                                                    valueState="{BaseData>/Parameters/BankaccountState}"
                                                                    width="15rem"
                                                                    showValueHelp="true"
                                                                    valueHelpRequest=".onOpenVHBankAccount"
                                                                />
                                                            </items>
                                                        </HBox>
                                                        <HBox
                                                            width="100%"
                                                            alignItems="Center"
                                                            class=""
                                                        >
                                                            <items>
                                                                <Label
                                                                    text="예금주 : "
                                                                    width="8rem"
                                                                />
                                                                <Text
                                                                    width="15rem"
                                                                    text="{BaseData>/Parameters/BankaccountName}"
                                                                />
                                                            </items>
                                                        </HBox>
                                                        <HBox
                                                            width="100%"
                                                            alignItems="Center"
                                                        >
                                                            <items>
                                                                <Label
                                                                    width="8rem"
                                                                    text="대체조정계정:"
                                                                />
                                                                <Input
                                                                    width="15rem"
                                                                    value="{BaseData>/Parameters/AccountRecon}"
                                                                    valueState="{BaseData>/Parameters/AccountReconState}"
                                                                    showValueHelp="true"
                                                                    valueHelpRequest=".onOpenVHAccountRecon"
                                                                />
                                                            </items>
                                                        </HBox>
                                                        <HBox
                                                            width="100%"
                                                            alignItems="Center"
                                                            class=""
                                                        >
                                                            <items>
                                                                <Label
                                                                    text="헤더 텍스트 : "
                                                                    width="8rem"
                                                                />
                                                                <Input
                                                                    width="15rem"
                                                                    maxLength="25"
                                                                    value="{BaseData>/Parameters/DocumentItemText}"
                                                                    valueState="{BaseData>/Parameters/DocumentItemTextState}"
                                                                />
                                                            </items>
                                                        </HBox>
                                                        <HBox
                                                            width="100%"
                                                            alignItems="Center"
                                                            class=""
                                                        >
                                                            <items>
                                                                <Label
                                                                    text="참조 : "
                                                                    width="8rem"
                                                                />
                                                                <Input
                                                                    width="15rem"
                                                                    maxLength="16"
                                                                    value="{BaseData>/Parameters/DocumentReferenceID}"
                                                                    valueState="{BaseData>/Parameters/DocumentReferenceIDState}"
                                                                />
                                                            </items>
                                                        </HBox>
                                                        
                                                    </items>
                                                </VBox>
                                                <VBox
                                                    width="100%"
                                                    direction="Column"
                                                >
                                                    <items>
                                                        <HBox
                                                            width="100%"
                                                            alignItems="Center"
                                                            class=""
                                                        >
                                                            <items>
                                                                <Label
                                                                    text="지급조건 : "
                                                                    width="8rem"
                                                                />
                                                                <Input
                                                                    xmlns:core="sap.ui.core"
                                                                    showValueHelp="true"
                                                                    width="15rem"
                                                                    value="{BaseData>/Parameters/PaymentTerms}"
                                                                    valueState="{BaseData>/Parameters/PaymentTermsState}"
                                                                    valueHelpRequest=".onOpenVHPaymentTerms"
                                                                />
                                                            </items>
                                                        </HBox>
                                                        <HBox
                                                            width="100%"
                                                            alignItems="Center"
                                                            class=""
                                                        >
                                                            <items>
                                                                <Label
                                                                    text="지급예정 : "
                                                                    width="8rem"
                                                                />
                                                                <Text
                                                                    width="15rem"
                                                                    text="{BaseData>/Parameters/Paymentscheduled}"
                                                                    
                                                                />
                                                            </items>
                                                        </HBox>
                                                        <HBox
                                                            width="100%"
                                                            alignItems="Center"
                                                        >
                                                            <items>
                                                                <Label
                                                                    text="지급금액 : "
                                                                    width="8rem"
                                                                />
                                                                <Input
                                                                    xmlns:core="sap.ui.core"
                                                                    valueState="{BaseData>/Parameters/AmountState}"
                                                                    change=".onChangeHeaderAmount"
                                                                    value="{
                                                                        parts: ['BaseData>/Parameters/Amount', 'BaseData>/Parameters/Currency'],
                                                                        type : 'sap.ui.model.type.Currency',
                                                                        formatOptions: {showMeasure : false}
                                                                    }"
                                                                    width="15rem"
                                                                />
                                                                <Label
                                                                    class="sapUiSmallMarginBegin"
                                                                    text="{BaseData>/Parameters/Currency}"
                                                                />
                                                            </items>
                                                        </HBox>
                                                        <HBox
                                                            width="100%"
                                                            alignItems="Center"
                                                        >
                                                            <items>
                                                                <Label
                                                                    text="세금코드 : "
                                                                    width="8rem"
                                                                />
                                                                <Input
                                                                    xmlns:core="sap.ui.core"
                                                                    change=".onTaxChange"
                                                                    value="{BaseData>/Parameters/TaxCode}"
                                                                    showValueHelp="true"
                                                                    valueState="{BaseData>/Parameters/TaxCodeState}"
                                                                    width="15rem"
                                                                    valueHelpRequest=".onOpenVHTaxcode"
                                                                />
                                                                <Label
                                                                    class="sapUiSmallMarginBegin"
                                                                    text="{BaseData>/Parameters/TaxCodeName}"
                                                                />
                                                            </items>
                                                        </HBox>
                                                        <HBox
                                                            width="100%"
                                                            alignItems="Center"
                                                        >
                                                            <items>
                                                                <Label
                                                                    text="부가세 : "
                                                                    width="8rem"
                                                                />
                                                                <Input
                                                                    width="15rem"   
                                                                    change=".onChangeHeaderAmount"
                                                                    value="{ 
                                                                        parts: ['BaseData>/Parameters/VATAmount', 'BaseData>/Parameters/Currency'],
                                                                        type : 'sap.ui.model.type.Currency',
                                                                        formatOptions: {showMeasure : false}
                                                                    }"
                                                                    editable="{= ${BaseData>/Parameters/TaxCode}.length > 0 ? true : false}"
                                                                />
                                                                <Label
                                                                    class="sapUiSmallMarginBegin"
                                                                    text="{BaseData>/Parameters/Currency}"
                                                                />
                                                            </items>
                                                        </HBox>
                                                    </items>
                                                </VBox>
                                            </items>
                                        </HBox>
                                    </form:content>
                                </form:SimpleForm>
                            </VBox>
                        </uxap:ObjectPageSubSection>
                    </uxap:subSections>
                </uxap:ObjectPageSection>   

                <uxap:ObjectPageSection
                    titleUppercase="true"
                    id="OPS_Header3"
                    title="Content"
                    showTitle="true"
                >
                    <uxap:subSections>
                        <uxap:ObjectPageSubSection title="상세입력">
                            <uxap:blocks>
                                <VBox>
                                    <HBox>
                                        <Table
                                            id="T_Items"
                                            fixedLayout="false"
                                            sticky="ColumnHeaders"
                                            items="{
                                                path : 'BaseData>/Items',
                                                templateShareable : false
                                            }"
                                            mode="MultiSelect"
                                        >
                                            <headerToolbar>
                                                <Toolbar>
                                                    <ToolbarSpacer />
                                                    <Button
                                                        icon="sap-icon://add"
                                                        press=".onAddBtnPress"
                                                    />
                                                    <Button
                                                        icon="sap-icon://less"
                                                        press=".onRemoveBtnPress"
                                                    />
                                                </Toolbar>
                                            </headerToolbar>
                                            <columns>
                                                <Column width="8rem">
                                                    <Text text="차변/대변" />
                                                </Column>
                                                <Column width="15rem">
                                                    <Text text="비용귀속" />
                                                </Column>
                                                <Column width="18rem">
                                                    <Text text="귀속부서명" />
                                                </Column>
                                                <Column width="15rem">
                                                    <Text text="비용 계정" />
                                                </Column>
                                                <Column width="18rem">
                                                    <Text text="비용 계정명" />
                                                </Column>
                                                <Column width="17rem">
                                                    <Text text="예산잔액" />
                                                </Column>
                                                <Column width="17rem">
                                                    <Text text="금액" />
                                                </Column>
                                                <Column width="25rem">
                                                    <Text text="적요" />
                                                </Column>
                                            </columns>
                                            <items>
                                                <ColumnListItem visible="{BaseData>Visible}">
                                                    <cells>
                                                        <Select
                                                            change=".onChangeDebitCreditCode"
                                                            selectedKey="{BaseData>DebitCreditCode}"
                                                            items="{
                                                                path: 'BaseData>/DebitCreditCode'
                                                            }"
                                                            enabled="false"
                                                        >
                                                            <core:Item
                                                                key="{BaseData>key}"
                                                                text="{BaseData>text}"
                                                            />
                                                        </Select>

                                                        <Input 
                                                            enabled="{BaseData>CostcenterEnable}"
                                                            value="{BaseData>Costcenter}"
                                                            valueState="{BaseData>CostcenterState}"
                                                            showValueHelp="true"
                                                            valueHelpOnly="true"
                                                            valueHelpRequest=".onOpenVHTBCostCenter"/>
                                                        <Input 
                                                            value="{BaseData>CostcenterName}"
                                                            editable="false" />

                                                        <Input
                                                            value="{BaseData>GLAccount}"
                                                            showValueHelp="true"
                                                            valueHelpOnly="true"
                                                            valueHelpRequest=".onOpenVHTBAccount"
                                                            valueState="{BaseData>GLAccountState}"
                                                            enabled="{BaseData>GLAccountEnable}"
                                                        />
                                                        <Input
                                                            value="{BaseData>GLAccountName}"
                                                            editable="false"
                                                        />
                                                        <Input
                                                            value="{
                                                                parts : ['BaseData>balance','BaseData>Currency'],
                                                                type : 'sap.ui.model.type.Currency',
                                                                formatOptions: {showMeasure : false}
                                                                }"
                                                            editable="false"
                                                        />
                                                        <Input
                                                            change=".onChangeAmount"
                                                            enabled="{BaseData>AmountEnable}"
                                                            value="{
                                                                parts: ['BaseData>Amount', 'BaseData>Currency'],
                                                                type : 'sap.ui.model.type.Currency',
                                                                formatOptions: {showMeasure : false}
                                                                
                                                            }"
                                                            valueStateText="{BaseData>AmountStateText}"
                                                            valueState="{BaseData>AmountState}"
                                                        />

                                                        <Input
                                                            value="{BaseData>DocumentItemText}"
                                                            valueState="{BaseData>DocumentItemTextState}"
                                                        />
                                                    </cells>
                                                </ColumnListItem>
                                            </items>
                                        </Table>
                                    </HBox>
                                </VBox>
                            </uxap:blocks>
                        </uxap:ObjectPageSubSection>
                    </uxap:subSections>
                </uxap:ObjectPageSection>
            </uxap:sections>
            <uxap:footer>
                <OverflowToolbar>
                    <Button 
                        icon="sap-icon://alert" 
                        text="{= ${BaseData>/ErrMsgs}.length }" 
                        type="Reject" 
                        press=".onMessagePopoverPress"/>
                    <ToolbarSpacer/>
                </OverflowToolbar>
		</uxap:footer>
        </uxap:ObjectPageLayout>
    </Page>
</mvc:View>
